<div class="box green">
  <div class="title">
    <%= t('search.search_options')%>
  </div>
  <div class="content">
    <label><%= t('search.show')%></label>
    <select id="main_filter">
      <option value="" selected="selected"><%= t('search.art_n_user')%></option>
      <option value="user"><%= t('search.users')%></option>
      <option value="art"><%= t('search.arts')%></option>
    </select>
  </div>
  
  <div id="user_search" style="display:none">
    <div class="title"><%= t('search.filters')%></div>
    <div class="content">
    </div>
  </div>
  <div id="art_search" style="display:none">
    <div class="title"><%= t('search.filters')%></div>
    <div class="content">
      <p><%= t('search.categories')%></p><br />
      <%= select_tag "category", options_from_collection_for_select(@categories, "slug", "name"), :prompt => t('search.categories_prompt') %>
    </div>
    <div class="title"><%= t('search.search_by_color')%></div>
    <div class="content">
      <form><input type="text" id="color" name="color" value="#ffffff" style="width:210px;" /></form>
      <div id="colorpicker" style="height:200px;"></div>
      <div style="text-align: center; overflow:hidden;">
        <a href="#" class="abutton" id="colorsearch"><%= t('search.search_button')%></a>
      </div>
    </div>
  </div>

  
  <script type="text/javascript">
    $(document).ready(function(){ 
      $('#colorpicker').farbtastic('#color');
      $("a#colorsearch").live("click", function(e) {
        e.preventDefault();
        var color = $("input#color").val().replace("#", "");
        location.replace('/color/' + color);
        $.ajax({
             url: '/color/' + color
         });
      });
      $('select#main_filter').change(function() {
    		$.ajax({
          url: '/search',
          data: {
            'utf8'  : '%E2%9C%93',
            'search': '<%= params[:search] if params[:search].present? %>',
            'type'  : $('select#main_filter').val()
          },
          dataType: 'script'
        });
    	});
    	$('select#category').change(function() {
    		$.ajax({
          url: '/search',
          data: {
            'utf8'     : '%E2%9C%93',
            'search'   : '<%= params[:search] if params[:search].present? %>',
            'type'     : $('select#main_filter').val(),
            'category' : $('select#category').val()
          },
          dataType: 'script'
        });
    	});
    });
  </script>
</div>